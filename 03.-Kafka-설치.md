# **개요**

- 이 문서는 AWS EC2 서버 3대에 각각 Zookeeper, Kafka, Python을 설치하여 Kafka를 이용해 개발하기 위한 개발 환경 구축 과정을 담은 문서입니다.
- 자세한 설명은 생략하고 최대한 명령어 위주로 담았습니다.
- EC2 운영체제의 버전은 Ubuntu Server 16.04 LTS입니다.
- 이 문서는 [카프카, 데이터 플랫폼의 최가장](https://book.naver.com/bookdb/book_detail.nhn?bid=13540082)를 참고하여 작성되었습니다.

------

# **설치할 소프트웨어**

- Java
- Apache Zookeeper
- Apache Kafka
- Anaconda for Python3

------

# **설치**

다음의 단계로 나누어 설치를 진행한다. 

0. [인스턴스 생성]()
1. [Zookeeper 서버 구축]()
2. [Kafka 서버 구축]()
3. [Producer, Consumer 서버 구축]()


## 0. 인스턴스 생성

***
## 1. AWS 가입 & EC2 인스턴스 생성
- AWS 가입 과정은 별도로 배포한 PPT를 참고합니다.
- [EC2 시작하기](https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/EC2_GetStarted.html)
- [EC2 인스턴스 생성](https://aws.amazon.com/ko/getting-started/tutorials/launch-a-virtual-machine/)

***
## 2. SSH를 이용해 EC2 인스턴스에 접속
```bash

# https://aws.amazon.com/ko/getting-started/tutorials/launch-a-virtual-machine/ 에서 참고했습니다.

c. SSH를 사용하여 인스턴스에 연결합니다.
이 사례에서는 사용자 이름이 ec2-user이고, SSH 키는 2단계 파트 d에서 저장한 디렉터리에 보관되어 있으며,
IP 주소는 2단계 파트 f에서 적어두었습니다. 형식은 ssh -i {.pem 파일의 전체 경로} ec2-user@{인스턴스 IP 주소}입니다.

- Windows 사용자: ssh -i 'c:\Users\yourusername\.ssh\MyKeyPair.pem' ec2-user@{IP_Address}
(예: ssh -i 'c:\Users\adamglic\.ssh\MyKeyPair.pem' ec2-user@52.27.212.125)를 입력합니다.

- Mac/Linux 사용자: ssh -i ~/.ssh/MyKeyPair.pem ec2-user@{IP_Address}
(예: ssh -i ~/.ssh/MyKeyPair.pem ec2-user@52.27.212.125)를 입력합니다.

참고: Amazon Linux 이외에 다른 Linux 인스턴스를 시작한 경우, 다른 사용자 이름이 사용될 수 있습니다. 일반적인 사용자 이름에는 ec2-user, root, ubuntu 및 fedora가 있습니다. 로그인 사용자 이름을 알 수 없는 경우, AMI 공급자에게 문의하십시오.

다음과 유사한 응답이 표시됩니다.

The authenticity of host 'ec2-198-51-100-1.compute-1.amazonaws.com (10.254.142.33)' can't be established. RSA key fingerprint is 1f:51:ae:28:df:63:e9:d8:cf:38:5d:87:2d:7b:b8:ca:9f:f5:b1:6f. Are you sure you want to continue connecting (yes/no)?

Yes를 입력하고 Enter 키를 누릅니다.

```
***
## 3. 기본 셋팅
```bash
$ cd $HOME

# 파일은 다운로드해 저장할 디렉터리 생성
$ mkdir downloads

# package manager(apt-get)을 최신화
$ sudo apt-get update

```

***


















- sudo apt-get update 
- mkdir downloads

- sudo apt-get install java-1.8.0-openjdk
- wget http://apache.mirror.cdnetworks.com/zookeeper/zookeeper-3.4.10/zookeeper-3.4.10.tar.gz
- tar zxf zookeeper-3.4.10.tar.gz
- mv zookeeper-3.4.10.tar.gz ./downloads
- ln -s zookeeper-3.4.10 zookeeper
- ls -ls zookeeper

- mkdir zookeeper_data
- echo 1 > ./zookeeper_data/myid
- cat ./zookeeper_data/myid

- vi ./zookeeper/conf/zoo.cfg
trickTime=2000
initLimit=10
syncLimit=5
dataDir=~/zookeeper_data
clientPort=2181
server.1=zk001:2888:3888
server.2=zk002:2888:3888
server.3=zk003:2888:3888

- cd zookeeper
- ./bin/zkServer.sh start
- ./bin/zkServer.sh start

